CMAKE_MINIMUM_REQUIRED(VERSION 2.8.3)


SET (TOUCHLIB_INCLUDE_DIRS CACHE INTERNAL "The list of include folders to search for the touchlib module.")
SET (TOUCHLIB_LIBS CACHE INTERNAL "The list of libraries that the touchlib module should link against.")

SET (TOUCHLIB_INCLUDE_DIRS ${TOUCHLIB_INCLUDE_DIRS} ${CMAKE_CURRENT_SOURCE_DIR}/include)
SET (TOUCHLIB_INCLUDE_DIRS ${TOUCHLIB_INCLUDE_DIRS} ${CMAKE_CURRENT_BINARY_DIR}/include)


# Module dependencies
SET (TOUCHLIB_LIBS ${TOUCHLIB_LIBS} utm50_utils)


FIND_PACKAGE(OpenSceneGraph)
IF (OPENSCENEGRAPH_FOUND)
  OPTION(TOUCHLIB_ENABLE_OpenSceneGraph "" ON)
  SET (TOUCHLIB_INCLUDE_DIRS ${TOUCHLIB_INCLUDE_DIRS} ${OPENSCENEGRAPH_INCLUDE_DIRS})
  SET (TOUCHLIB_LIBS ${TOUCHLIB_LIBS} ${OPENSCENEGRAPH_LIBRARIES})
ENDIF ()

FIND_PACKAGE(SDL2)
IF (SDL2_FOUND)
  OPTION(TOUCHLIB_ENABLE_SDL2 "" ON)
  SET (TOUCHLIB_INCLUDE_DIRS ${TOUCHLIB_INCLUDE_DIRS} ${SDL2_INCLUDE_DIR})
  SET (TOUCHLIB_LIBS ${TOUCHLIB_LIBS} ${SDL2_LIBRARY})
ENDIF ()

FIND_PACKAGE(TUIO)
IF (TUIO_FOUND)
  OPTION(TOUCHLIB_ENABLE_TUIO "" ON)
  SET (TOUCHLIB_INCLUDE_DIRS ${TOUCHLIB_INCLUDE_DIRS} ${TUIO_INCLUDE_DIRS})
  SET (TOUCHLIB_LIBS ${TOUCHLIB_LIBS} ${TUIO_LIBRARY})
ENDIF ()


CONFIGURE_FILE(
  ${CMAKE_CURRENT_SOURCE_DIR}/include/touchlib/config_cmake.hh
  ${CMAKE_CURRENT_BINARY_DIR}/include/touchlib/config.hh)


FILE(GLOB_RECURSE HEADERS include/*.hh)
FILE(GLOB_RECURSE SOURCES src/*.cpp)

SOURCE_GROUP("headers" FILES ${HEADERS})

ADD_LIBRARY(touchlib ${HEADERS} ${SOURCES})

TARGET_INCLUDE_DIRECTORIES(touchlib PUBLIC ${TOUCHLIB_INCLUDE_DIRS})
TARGET_LINK_LIBRARIES(touchlib ${TOUCHLIB_LIBS})

SET_PROPERTY(TARGET touchlib PROPERTY CXX_STANDARD 14)
